
<div class="container-flud">
  <div class="row-fluid">
    <% if flash[:info] %>
      <div class="alert alert-info" style="width: 400px;">
          <a class="close" data-dismiss="alert" href="#">×</a> <%= flash[:info] %>
      </div>
    <% end %>
  </div>
  <div class="row-fluid">
    <div class="span4">
      <%= form_tag create_or_edit_ssg_admin_cities_path, { :id => "mainForm", :class => "form-horizontal form-cover form-cover-city-create"} do %>
      <!--
      <form id="mainForm" class="form-horizontal form-cover form-cover-create">
        
      -->
        <input type="hidden" name="city_id">
        <div class="control-group">
          <label class="control-label" for="inputName">Ime</label>
          <div class="controls">
            <input type="text" id="inputName" name="city_name" placeholder="Ime Grada">
          </div>
        </div>       
        <div class="control-group">
          <label class="control-label" for="inputLat">Latituda</label>
          <div class="controls">
            <input type="text" id="inputLat" name="lat" placeholder="Latituda">
          </div>
        </div>      
        <div class="control-group">
          <label class="control-label" for="inputLong">Longituda</label>
          <div class="controls">
            <input type="text" id="inputLong" name="lon" placeholder="Longituda">
          </div>
        </div>
        <br />
        <br />
        <div class="btn-toolbar" style="text-align: center; margin-left: 80px;">
          <div class="btn-group">
              <button id="btn_create" class="btn btn-primary" type="submit" >Kreiraj</button>
              <button id="btn_edit" class="btn btn-primary" type="submit" disabled>Ažuriraj</button>
          </div>
          <button class="btn btn-warning" onclick="resetForm();" type="button"3>Reset</button>
        </div> 
      <% end %>
    </div>
    <div class="span8">
      <div class="form-cover form-cover-city-list">
        <table class="table table-bordered">
          <thead>
            <tr>
              <th>#</th>
              <th>Naziv</th>
              <th>Latitude</th>
              <th>Longitude</th>
              <th>Kontrole</th>
            </tr>
          </thead>
          <tbody>
            <% @cities.each do |city| %>
            <tr id="<%= "row_#{city.id}" %>">
              <td><%= city.id %></td>
              <td><%= city.name %></td>
              <td><%= city.lat %></td>
              <td><%= city.long %></td>
              <td>
                <div class="btn-toolbar" style="text-align: center;">
                  <div class="btn-group">
                    <a onclick="populateForm(<%=city.id%>);">
                      <button class="btn-tiny btn-primary">Ažuriraj</button>
                    </a>
                    <a href="<%= ssg_admin_city_path(city.id) %>" data-confirm="Da li ste sigurni?" data-method="delete" rel="nofollow">
                      <button class="btn-tiny btn-danger">Obriši</button>
                    </a>
                  </div>
                </div> 
              </td>
            </tr>
            <% end %>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<script type="text/javascript">
  
  FormValues = ['city_id','city_name','lat','lon'];

  enableCreateBtn = function(flag) {
    $('#btn_create').prop('disabled', !flag);
    $('#btn_edit').prop('disabled', flag);
  };

  populateForm = function(id) {
    values = $('#row_' + id + ' td');
    // set values to  form
    $.each(values, function(i, v) {
      $("[name='" + FormValues[i] + "']").val(v.textContent);
    });

    enableCreateBtn(false);
    window.scrollTo(0, 0);
  };

  resetForm = function() {
    $.each(FormValues, function(i,v) {
      $("[name='" + FormValues[i] + "']").val('');
    });

    enableCreateBtn(true);
  };

  $(document).ready(function() {
  });
</script>