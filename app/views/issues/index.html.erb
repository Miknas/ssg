

<div id="issues_left_column">
	<%= render :partial => 'issue', :collection => @issues %>
	
	<% if @issues.length == 0 %>
	<div class="issue">
		BUDI PRVI KOJI CE PRIJAVITI PROBLEM
	</div>
	<% end %>
	
</div>

<%= render :partial => 'right_menu' %>

<script>
$(function(){
	var page_no = 1;
   $('#issues_left_column').scrollPagination({
       'contentPage': '<%=more_issues_path()%>?offset=' + (page_no*9), // the page where you are searching for results
       'contentData': {}, 				// you can pass the children().size() to know where is the pagination
       'scrollTarget': $(window), 		// who gonna scroll? in this example, the full window
       'heightOffset': 10, 				// how many pixels before reaching end of the page would loading start? positives numbers only please
       'beforeLoad': function(){ 		// before load, some function, maybe display a preloader div
//           alert('Loading ...');
       },
       'afterLoad': function(elementsLoaded){ // after loading, some function to animate results and hide a preloader div
            // $('.loading').fadeOut();
            var i = 0;
            $(elementsLoaded).fadeInWithDelay();
            if ($('#content').children().size() > 100){ 	// if more than 100 results loaded stop pagination (only for test)
               $('#content').stopScrollPagination();
            }
			page_no ++;
       }
   });
   
   // code for fade in element by element with delay
   $.fn.fadeInWithDelay = function(){
       var delay = 0;
       return this.each(function(){
           $(this).delay(delay).animate({opacity:1}, 200);
           delay += 100;
       });
   };
          
});
</script>